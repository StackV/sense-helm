{{- if .Values.psql.enabled }}
---
apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  namespace: {{ include "common.names.namespace" . | quote }}
  labels: {{- include "common.labels.standard" . | nindent 4 }}
    app.kubernetes.io/component: keycloak
  name: {{ default (printf "%s-psql-cluster" .Release.Name) .Values.psql.name  }}
spec:
  instances: 1
  bootstrap:
    initdb:
      database: {{ .Values.psql.database }}
      owner: {{ .Values.psql.username }}
      secret:
        name: {{ .Values.psql.secret }}
  storage:
    size: 1Gi
{{- end }}